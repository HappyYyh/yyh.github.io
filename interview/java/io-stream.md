---
title: IO流
permalink: /interview/java/io-stream
key: io-stream
---

##  概念

### 【如何理解同步/异步、并发/并行、阻塞/非阻塞的概念】

1. **同步/异步**

   **同步**:发送一个请求,等待返回,然后再发送下一个请求  

   **异步**:发送一个请求,不等待返回,随时可以再发送下一个请求

   

2. **并发/并行**

   **并发**：当有多个线程在操作时,如果系统只有一个CPU,则它根本不可能真正同时进行一个以上的线程，它只能把CPU运行时间划分成若干个时间段,再将时间 段分配给各个线程执行，在**一个时间段的线程代码运行时，其它线程处于挂起状**。这种方式我们称之为并发(Concurrent)。

   **并行**：当系统有一个以上CPU时,则线程的操作有可能非并发。当一个CPU执行一个线程时，另一个CPU可以执行另一个线程，两个线程互不抢占CPU资源，可以**同时进行**，这种方式我们称之为并行(Parallel)。

   **注意**：单核系统（time-sharing）能实现并发处理，但只有多核系统才能实现并行处理。

   

3. **阻塞/非阻塞**

   **阻塞**：调用结果返回之前，当前线程会被挂起。调用线程只有在得到结果之后才会返回，该线程在此过程中不能进行其他处理

   **非阻塞**：调用结果不能马上返回，当前线程也不会被挂起，而是立即返回执行下一个调用。



### 【解释同步/异步/阻塞/非阻塞】

- **同步阻塞方式**

  发送方发送请求之后一直等待响应。接收方处理请求时进行的IO操作如果不能马上等到返回结果，就**一直等**到返回结果后，才响应发送方，期间**不能进行其他工作**

- **同步非阻塞方式**

  发送方发送请求之后，一直等待响应，接受方处理请求时进行的IO操作如果不能马上的得到结果，就立即返回，取做其他事情。但是由于没有得到请求处理结果，不响应发送方，发送方一直等待。一直等到IO操作完成后，接收方获得结果响应发送发后，接收方才进入下一次请求过程。（实际不应用）

- **异步阻塞方式**

  发送方向接收方请求后，不等待响应，可以继续其他工作，接收方处理请求时进行IO操作如果不能马上得到结果，就一直等到返回结果后，才响应发送方，期间不能进行其他操作。 （实际不应用）

- **异步非阻塞方式**

  发送方向接收方请求后，不等待响应，可以继续其他工作，接收方处理请求时进行IO操作如果不能马上得到结果，也不等待，而是马上返回取做其他事情。当IO操作完成以后，将完成状态和结果通知接收方，接收方在响应发送方。（效率最高）



### 【BIO/NIO/AIO的概念以及使用场景】

- **JAVA BIO**：

  **概念：**

  同步并阻塞，服务器实现模式为一个连接一个线程，即客户端有连接请求时服务器端就需要启动一个线程并处理，如果这个连接不做任何事情会造成不必要的开销，当然可以通过线程池机制改善

  **使用场景：**

  BIO方式适用于连接数目比较小且固定的架构，这种方式对服务器资源要求比较高，并发局限于应用中，JDK1.4以前的唯一选择，但程序直观简单易理解。

  

- **JAVA NIO**：

  **概念：**

  同步非阻塞，服务器实现模式为一个请求一个线程，即客户端发送的连接请求都会注册到多路复用器上，多路复用器轮询到连接有IO请求时才启动一个线程进行处理

  **使用场景：**

  NIO方式适用于连接数目多且连接比较短（轻操作）的架构，比如聊天服务器，并发局限于应用中，编程比较复杂，JDK1.4开始支持。

  

- **JAVA AIO(NIO2)**：

  **概念：**

  异步非阻塞，服务器实现模式为一个有效请求一个线程，客户端的I/O请求都是由OS先完成了再通知服务器应用去启动线程进行处理

  **使用场景：**

  AIO方式使用于连接数目多且连接比较长（重操作）的架构，比如相册服务器，充分调用OS参与并发操作，编程比较复杂，JDK7开始支持。



### 【NIO中selector/poll/epoll的区别 】 

select：[http://www.cnblogs.com/Anker/archive/2013/08/14/3258674.html](https://link.jianshu.com?t=http%3A%2F%2Fwww.cnblogs.com%2FAnker%2Farchive%2F2013%2F08%2F14%2F3258674.html)

poll：[http://www.cnblogs.com/Anker/archive/2013/08/15/3261006.html](https://link.jianshu.com?t=http%3A%2F%2Fwww.cnblogs.com%2FAnker%2Farchive%2F2013%2F08%2F15%2F3261006.html)

epoll：[http://www.cnblogs.com/Anker/archive/2013/08/17/3263780.html](https://link.jianshu.com?t=http%3A%2F%2Fwww.cnblogs.com%2FAnker%2Farchive%2F2013%2F08%2F17%2F3263780.html)



### 【NIO（非阻塞型IO）在Java中的实际应用】  



## 硬盘IO

### 【Java字节流与字符流 】 

字节流：InputStream和OutputStream

字符流：Reader和Writer

## Socket IO